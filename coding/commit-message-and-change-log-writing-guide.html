<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Commit message 和 Change log 编写指北 | Blog</title>
    <meta name="description" content="Commit message 和 Change log 编写指北">
    
    <meta name="keywords" content="git commit change log">
    <link rel="preload" href="/assets/css/styles.e418f3b2.css" as="style"><link rel="preload" href="/assets/js/app.e418f3b2.js" as="script"><link rel="preload" href="/assets/js/5.6fc87358.js" as="script"><link rel="prefetch" href="/assets/css/1.styles.47b44045.css"><link rel="prefetch" href="/assets/js/1.47b44045.js"><link rel="prefetch" href="/assets/css/2.styles.f515390e.css"><link rel="prefetch" href="/assets/js/2.f515390e.js"><link rel="prefetch" href="/assets/js/3.13653eae.js"><link rel="prefetch" href="/assets/js/4.ddbf7069.js"><link rel="prefetch" href="/assets/js/6.351126f6.js">
    <link rel="stylesheet" href="/assets/css/styles.e418f3b2.css"><link rel="stylesheet" href="/assets/css/1.styles.47b44045.css"><link rel="stylesheet" href="/assets/css/2.styles.f515390e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/coding/" class="nav-link router-link-active">Coding</a></div><div class="nav-item"><a href="/photography/" class="nav-link">Photography</a></div><div class="nav-item"><a href="/guitar/" class="nav-link">Guitar</a></div><div class="nav-item"><a href="https://m809745357.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Resume
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/m809745357/m809745357.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/coding/" class="nav-link router-link-active">Coding</a></div><div class="nav-item"><a href="/photography/" class="nav-link">Photography</a></div><div class="nav-item"><a href="/guitar/" class="nav-link">Guitar</a></div><div class="nav-item"><a href="https://m809745357.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Resume
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/m809745357/m809745357.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Commit message 和 Change log 编写指北</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/coding/commit-message-and-change-log-writing-guide.html#commitlint" class="sidebar-link">Commitlint</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/commit-message-and-change-log-writing-guide.html#安装-commitlint" class="sidebar-link">安装 Commitlint</a></li><li class="sidebar-sub-header"><a href="/coding/commit-message-and-change-log-writing-guide.html#配置-commitlint" class="sidebar-link">配置 Commitlint</a></li><li class="sidebar-sub-header"><a href="/coding/commit-message-and-change-log-writing-guide.html#使用-commitlint" class="sidebar-link">使用 Commitlint</a></li></ul></li><li><a href="/coding/commit-message-and-change-log-writing-guide.html#husky" class="sidebar-link">Husky</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/commit-message-and-change-log-writing-guide.html#安装-husky" class="sidebar-link">安装 Husky</a></li><li class="sidebar-sub-header"><a href="/coding/commit-message-and-change-log-writing-guide.html#使用-husky" class="sidebar-link">使用 Husky</a></li></ul></li><li><a href="/coding/commit-message-and-change-log-writing-guide.html#husky-next" class="sidebar-link">husky@next</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/commit-message-and-change-log-writing-guide.html#安装-husky-next" class="sidebar-link">安装 husky@next</a></li><li class="sidebar-sub-header"><a href="/coding/commit-message-and-change-log-writing-guide.html#使用-husky-next" class="sidebar-link">使用 husky@next</a></li></ul></li><li><a href="/coding/commit-message-and-change-log-writing-guide.html#commitizen" class="sidebar-link">Commitizen</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/commit-message-and-change-log-writing-guide.html#安装-commitizen" class="sidebar-link">安装 Commitizen</a></li><li class="sidebar-sub-header"><a href="/coding/commit-message-and-change-log-writing-guide.html#使用-commitizen" class="sidebar-link">使用 Commitizen</a></li></ul></li><li><a href="/coding/commit-message-and-change-log-writing-guide.html#扩展分享" class="sidebar-link">扩展分享</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="commit-message-和-change-log-编写指北"><a href="#commit-message-和-change-log-编写指北" aria-hidden="true" class="header-anchor">#</a> Commit message 和 Change log 编写指北</h1> <h2 id="commitlint"><a href="#commitlint" aria-hidden="true" class="header-anchor">#</a> Commitlint</h2> <p>commitlint 可以帮助您的团队遵守提交约定。通过支持 npm 安装的配置，它可以轻松地共享提交约定。</p> <h3 id="安装-commitlint"><a href="#安装-commitlint" aria-hidden="true" class="header-anchor">#</a> 安装 Commitlint</h3> <p>全局安装软件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g @commitlint/cli @commitlint/config-conventional
</code></pre></div><p>这里只截图了安装成功的界面</p> <p><img src="/assets/img/image-20180920154527508.5167f7c3.png" alt="image-20180920154527508"></p> <h3 id="配置-commitlint"><a href="#配置-commitlint" aria-hidden="true" class="header-anchor">#</a> 配置 Commitlint</h3> <p>如果没有这个配置项，那么怎么执行都是成功的。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">echo</span> <span class="token string">&quot;module.exports = {extends: ['@commitlint/config-conventional']}&quot;</span> <span class="token operator">&gt;</span> commitlint.config.js
</code></pre></div><h3 id="使用-commitlint"><a href="#使用-commitlint" aria-hidden="true" class="header-anchor">#</a> 使用 Commitlint</h3> <p>打开一个任意的目录执行以下命令。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Lint from stdin</span>
<span class="token keyword">echo</span> <span class="token string">'foo: bar'</span> <span class="token operator">|</span> commitlint
⧗   input:
foo: bar

✖   <span class="token function">type</span> must be one of <span class="token punctuation">[</span>build, chore, ci, docs, feat, fix, perf, refactor, revert, style, test<span class="token punctuation">]</span> <span class="token punctuation">[</span>type-enum<span class="token punctuation">]</span>
✖   found 1 problems, 0 warnings

<span class="token comment"># Lint last commit from history</span>
commitlint --from<span class="token operator">=</span>HEAD~1
</code></pre></div><p>下面执行的是在本地的，为什么第二个命令还是报错呢，因为冒号后面少了一个空格</p> <p><img src="/assets/img/image-20180920152535735.35ec579a.png" alt="image-20180920152535735"></p> <p>但是按照上面所述我是不是每次都要 echo 一下然后在提交呢？</p> <p>其实是没有必要的，这个软件提供了一个 hook 来实现，他的原理大概就是能够在 Git 提交前创建钩子。</p> <h2 id="husky"><a href="#husky" aria-hidden="true" class="header-anchor">#</a> Husky</h2> <blockquote><p>Git hooks made easy</p></blockquote> <p>官方的翻译可以防止错误的提交和推送等。</p> <h3 id="安装-husky"><a href="#安装-husky" aria-hidden="true" class="header-anchor">#</a> 安装 Husky</h3> <p>本地安装软件，就是装在你要运行的 Git 仓库里面。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev husky
</code></pre></div><p>这允许我们将 <a href="https://github.com/typicode/husky/blob/master/HOOKS.md#hooks" target="_blank" rel="noopener noreferrer">git hooks<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 直接添加到我们的 <code>package.json</code> 脚本中。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commitmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commitlint -E GIT_PARAMS&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-husky"><a href="#使用-husky" aria-hidden="true" class="header-anchor">#</a> 使用 Husky</h3> <p><img src="/assets/img/image-20180920165125125.c497c030.png" alt="image-20180920165125125"></p> <h2 id="husky-next"><a href="#husky-next" aria-hidden="true" class="header-anchor">#</a> husky@next</h2> <h3 id="安装-husky-next"><a href="#安装-husky-next" aria-hidden="true" class="header-anchor">#</a> 安装 husky@next</h3> <p>主要是用来变换钩子的位置。</p> <p>本地安装软件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> husky@next --save-dev
</code></pre></div><h3 id="使用-husky-next"><a href="#使用-husky-next" aria-hidden="true" class="header-anchor">#</a> 使用 husky@next</h3> <p>运行自动化命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./node_modules/.bin/husky-upgrade
</code></pre></div><p>可以清晰的看到变化，就是把 <code>scripts</code> 里面的变成了 <code>husky.hooks</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code>{
  &quot;scripts&quot;: {
<span class="token deleted">-   &quot;commitmsg&quot;: &quot;commitlint -E GIT_PARAMS&quot;</span>
  },
<span class="token inserted">+ &quot;husky&quot;: {</span>
<span class="token inserted">+   &quot;hooks&quot;: {</span>
<span class="token inserted">+     &quot;commit-msg&quot;: &quot;commitlint -E GIT_PARAMS&quot;</span>
<span class="token inserted">+   }</span>
<span class="token inserted">+ }</span>
}
</code></pre></div><h2 id="commitizen"><a href="#commitizen" aria-hidden="true" class="header-anchor">#</a> Commitizen</h2> <p>使用Commitizen提交时，系统会提示您在提交时填写所有必需的提交字段。</p> <h3 id="安装-commitizen"><a href="#安装-commitizen" aria-hidden="true" class="header-anchor">#</a> 安装 Commitizen</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g commitizen
</code></pre></div><p>更新  <code>package.json</code> 文件内容</p> <div class="language-diff extra-class"><pre class="language-diff"><code>&quot;scripts&quot;: {
<span class="token inserted">+   &quot;commit&quot;: &quot;npx git-cz&quot;</span>
}
</code></pre></div><h3 id="使用-commitizen"><a href="#使用-commitizen" aria-hidden="true" class="header-anchor">#</a> 使用 Commitizen</h3> <p><img src="/assets/img/image-20180920170944520.139d5ebb.png" alt="image-20180920170944520"></p> <h2 id="扩展分享"><a href="#扩展分享" aria-hidden="true" class="header-anchor">#</a> 扩展分享</h2> <ul><li><a href="https://github.com/marionebl/commitlint" target="_blank" rel="noopener noreferrer">marionebl/commitlint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">commitizen/cz-cli<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">typicode/husky<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/h8y0bDJVUkwE1LboZlE/article/details/79695666" target="_blank" rel="noopener noreferrer">优雅的提交你的 Git Commit Message<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank" rel="noopener noreferrer">Commit message 和 Change log 编写指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/5.6fc87358.js" defer></script><script src="/assets/js/app.e418f3b2.js" defer></script>
  </body>
</html>
